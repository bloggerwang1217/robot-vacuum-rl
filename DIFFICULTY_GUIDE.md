# 難度配置指南

## 📊 完整參數對比表

| 參數 | 簡單 (easy) | 中等 (medium) | 困難 (hard) | 測試 (test) | 能量挑戰 (energy) | 垃圾爆炸 (garbage) |
|------|------------|--------------|------------|------------|------------------|-------------------|
| **房間大小** (n×n) | 10×10 | 15×15 | 20×20 | 8×8 | 15×15 | 12×12 |
| **家具格數** (k) | 5 | 10 | 20 | 3 | 12 | 8 |
| **垃圾生成率** (p) | 2% | 5% | 8% | 10% | 5% | 15% |
| **初始能量** | 150 | 100 | 80 | 50 | 60 | 120 |
| **移動消耗** | 1 | 1 | 2 | 1 | 2 | 1 |
| **充電恢復** | 15 | 10 | 8 | 5 | 5 | 12 |
| **碰撞消耗** | 3 | 5 | 8 | 3 | 10 | 4 |
| **總回合數** | 300 | 500 | 800 | 100 | 400 | 600 |

---

## 🎮 各難度詳細分析

### 1️⃣ 簡單模式 (Easy)
**適合對象**：新手、測試基礎功能

**特點**：
- 🏠 **小房間** (10×10 = 100格)：移動距離短，容易管理
- 🪑 **少障礙** (5格)：撞到家具的機率低
- 🗑️ **低垃圾率** (2%)：每回合約產生 2 個垃圾
- 🔋 **高初始能量** (150)：可連續移動 150 步
- ⚡ **高效充電** (15/次)：10回合就能充滿

**能量計算**：
- 從角落到中心約 5 步，消耗 5 能量
- 來回一次消耗 10 能量，可充電 15 能量
- **能量盈餘**：+5，非常寬裕

**預期表現**：
- 所有機器人應該能存活到最後
- 總垃圾收集量：300-400 個

---

### 2️⃣ 中等模式 (Medium) ⭐ 預設
**適合對象**：標準測試、RL 訓練起點

**特點**：
- 🏠 **標準房間** (15×15 = 225格)：平衡的空間大小
- 🪑 **適中障礙** (10格)：需要一定的路徑規劃
- 🗑️ **中等垃圾率** (5%)：每回合約產生 11 個垃圾
- 🔋 **標準能量** (100)：需要適度管理能量
- ⚡ **標準充電** (10/次)：10回合充滿

**能量計算**：
- 從角落到中心約 7-8 步，消耗 7-8 能量
- 來回一次消耗 14-16 能量，充電 10 能量
- **能量赤字**：-4~-6，需要策略充電

**預期表現**：
- 2-3 台機器人能存活到最後
- 總垃圾收集量：400-600 個

---

### 3️⃣ 困難模式 (Hard)
**適合對象**：進階測試、挑戰極限

**特點**：
- 🏠 **大房間** (20×20 = 400格)：空間巨大，距離遙遠
- 🪑 **多障礙** (20格)：路徑複雜，容易碰撞
- 🗑️ **高垃圾率** (8%)：每回合約產生 32 個垃圾
- 🔋 **低能量** (80)：只能移動 40 步
- ⚡ **慢充電** (8/次)：需要 10 回合充滿
- 💥 **高碰撞懲罰** (8)：一次碰撞 = 4 步移動

**能量計算**：
- 從角落到中心約 10 步，消耗 20 能量（移動消耗×2）
- 來回一次消耗 40 能量，充電 8 能量
- **能量嚴重赤字**：-32，必須精確規劃

**挑戰點**：
- 房間太大，垃圾生成速度快於清理速度
- 能量消耗是中等模式的 2 倍
- 必須頻繁返回充電站

**預期表現**：
- 只有 1-2 台機器人能堅持到最後
- 總垃圾收集量：300-500 個（儘管垃圾更多）

---

### 4️⃣ 測試模式 (Test)
**適合對象**：快速驗證、Debug

**特點**：
- 🏠 **超小房間** (8×8 = 64格)：最小的測試環境
- 🗑️ **極高垃圾率** (10%)：每回合約產生 6 個垃圾
- ⏱️ **短時間** (100回合)：快速結束
- 🔋 **低能量** (50)：挑戰能量管理

**用途**：
- 快速測試程式碼修改
- 驗證新功能
- Debug 特定場景
- 約 1-2 分鐘完成一局

---

### 5️⃣ 能量挑戰模式 (Energy Challenge)
**適合對象**：測試能量管理策略

**特點**：
- 🔋 **低起始能量** (60)：只能移動 30 步
- ⚡ **慢充電** (5/次)：需要 12 回合充滿
- 💥 **超高碰撞懲罰** (10)：一次碰撞 = 5 步移動
- 🚶 **高移動成本** (2/步)：移動消耗加倍

**核心挑戰**：
這是一個「能量生存遊戲」，重點不在清掃垃圾，而在於：
1. **避免碰撞**：碰撞一次損失 10 能量（5步移動）
2. **最短路徑**：移動成本高，必須規劃最優路線
3. **充電時機**：何時返回充電站是關鍵決策
4. **充電效率**：充電速度慢，需要停留 12 回合才能充滿

**能量計算**：
- 從角落到中心約 7 步，消耗 14 能量
- 來回需要 28 能量，但初始只有 60 能量
- 充電 12 次才能恢復 60 能量
- 一次碰撞 = 10 能量 = 5 步移動

**策略建議**：
- 機器人應該待在自己的象限
- 頻繁返回充電站
- 絕對避免碰撞
- 需要高度的路徑規劃能力

---

### 6️⃣ 垃圾爆炸模式 (Garbage Explosion)
**適合對象**：測試清掃效率、多機器人協作

**特點**：
- 🗑️ **極高垃圾率** (15%)：每回合約產生 18 個垃圾
- 🔋 **充裕能量** (120)：足夠的能量支持
- ⚡ **快速充電** (12/次)：10 回合充滿
- ⏱️ **長時間** (600回合)：充分的清掃時間

**核心挑戰**：
這是一個「清掃效率競賽」，垃圾生成速度極快：
- **垃圾爆炸**：600 回合可能產生 10,800 個垃圾
- **清掃速度**：4 台機器人必須高效協作
- **覆蓋範圍**：需要合理分配清掃區域
- **垃圾堆積**：如果清理不及時，地圖會被垃圾淹沒

**理論計算**：
- 每回合生成約 18 個垃圾
- 每台機器人每回合最多清理 1 個垃圾
- 4 台機器人每回合最多清理 4 個垃圾
- **生成速度 > 清理速度**（18 > 4）

**結果預測**：
- 地圖上會持續累積垃圾
- 測試 4 台機器人的協作效率
- 總垃圾收集量：2000-3000 個
- 但地圖上剩餘垃圾可能 > 5000 個

---

## 🎯 難度選擇建議

### 開發階段
1. **開始開發** → `test` 模式（快速迭代）
2. **功能驗證** → `easy` 模式（確保基本功能正常）
3. **標準測試** → `medium` 模式（日常測試）
4. **性能測試** → `hard` 模式（壓力測試）

### RL 訓練階段
1. **初期訓練** → `easy` 模式（讓 agent 學會基本操作）
2. **中期訓練** → `medium` 模式（學習能量管理）
3. **進階訓練** → `energy` 模式（精細化能量策略）
4. **協作訓練** → `garbage` 模式（多機器人協調）
5. **最終挑戰** → `hard` 模式（綜合能力測試）

### 特定測試目標
- **測試碰撞檢測** → `hard` 模式（障礙多）
- **測試能量系統** → `energy` 模式（能量緊張）
- **測試垃圾生成** → `garbage` 模式（垃圾爆發）
- **測試多機器人協作** → `garbage` 模式（需要配合）

---

## 📈 關鍵指標對比

### 房間複雜度 (格子數 × 障礙比例)
```
test:    64 × 4.7%  = 3.0   ⭐（最簡單）
easy:    100 × 5.0% = 5.0   ⭐⭐
garbage: 144 × 5.6% = 8.0   ⭐⭐
medium:  225 × 4.4% = 9.9   ⭐⭐⭐
energy:  225 × 5.3% = 11.9  ⭐⭐⭐
hard:    400 × 5.0% = 20.0  ⭐⭐⭐⭐⭐（最難）
```

### 能量效率 (充電量 / 移動消耗)
```
easy:    15 / 1  = 15.0  ⭐⭐⭐⭐⭐（最寬裕）
garbage: 12 / 1  = 12.0  ⭐⭐⭐⭐
medium:  10 / 1  = 10.0  ⭐⭐⭐
test:    5 / 1   = 5.0   ⭐⭐
hard:    8 / 2   = 4.0   ⭐
energy:  5 / 2   = 2.5   ⭐（最緊張）
```

### 垃圾壓力 (每回合垃圾生成量)
```
easy:    ~2  ⭐
test:    ~6  ⭐⭐
medium:  ~11 ⭐⭐⭐
garbage: ~18 ⭐⭐⭐⭐⭐（最大壓力）
hard:    ~32 ⭐⭐⭐⭐⭐⭐（超大壓力，但機器人速度不夠）
```

---

## 🚀 快速啟動

```bash
# 測試各個難度
python run_simulation.py -d test      # 快速驗證（1-2分鐘）
python run_simulation.py -d easy      # 輕鬆模式（3-4分鐘）
python run_simulation.py -d medium    # 標準模式（5-7分鐘）
python run_simulation.py -d hard      # 挑戰模式（8-12分鐘）
python run_simulation.py -d energy    # 能量生存（4-6分鐘）
python run_simulation.py -d garbage   # 垃圾爆炸（6-10分鐘）
```

---

## 💡 調參建議

如果你想自訂難度，以下是調整建議：

### 讓遊戲更簡單
- ⬇️ 減小房間 (`n`)
- ⬇️ 減少家具 (`k`)
- ⬇️ 降低垃圾率 (`p`)
- ⬆️ 增加初始能量 (`initial_energy`)
- ⬆️ 增加充電速度 (`e_charge`)
- ⬇️ 減少移動消耗 (`e_move`)
- ⬇️ 減少碰撞懲罰 (`e_collision`)

### 讓遊戲更困難
- ⬆️ 增大房間 (`n`)
- ⬆️ 增加家具 (`k`)
- ⬆️ 提高垃圾率 (`p`)
- ⬇️ 減少初始能量 (`initial_energy`)
- ⬇️ 降低充電速度 (`e_charge`)
- ⬆️ 增加移動消耗 (`e_move`)
- ⬆️ 增加碰撞懲罰 (`e_collision`)
